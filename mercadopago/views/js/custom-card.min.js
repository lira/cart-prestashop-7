/**
* 2007-2021 PrestaShop
*
* NOTICE OF LICENSE
*
* This source file is subject to the Academic Free License (AFL 3.0)
* that is bundled with this package in the file LICENSE.txt.
* It is also available through the world-wide-web at this URL:
* http://opensource.org/licenses/afl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@prestashop.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade PrestaShop to newer
* versions in the future. If you wish to customize PrestaShop for your
* needs please refer to http://www.prestashop.com for more information.
*
*  @author    PrestaShop SA <contact@prestashop.com>
*  @copyright 2007-2021 PrestaShop SA
*  @license   http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
*  International Registered Trademark & Property of PrestaShop SA
*
* Don't forget to prefix your containers with your own identifier
* to avoid any conflicts with others containers.
*/
!function(){var r={},i={},l={site_id:""},c={select_choose:""},t="";function e(e){f(),y(),p(),document.getElementById("mp-doc-div-title").style.display="none",document.getElementById("mp-doc-div").style.display="none",document.getElementById("mp-doc-type-div").style.display="none",document.getElementById("mp-doc-number-div").style.display="none",document.getElementById("id-docType").innerHTML="",document.getElementById("id-doc-number").value="";var t=u();t.length<6?document.getElementById("id-card-number").style.background="no-repeat #fff":"keyup"===e.type?6<=t.length&&Mercadopago.getPaymentMethod({bin:t},n):setTimeout(function(){6<=t.length&&Mercadopago.getPaymentMethod({bin:t},n)},100)}function n(e,t){var n,o;200===e?(r=t[0],o=r.id,document.getElementById("payment_method_id").value=o,n=r.secure_thumbnail,document.getElementById("id-card-number").style.background="url("+n+") 98% 50% no-repeat #fff",function(e){i={issuer:!1,cardholder_name:!1,cardholder_identification_type:!1,cardholder_identification_number:!1};for(var t=0;t<e.length;t++)"issuer_id"===e[t]&&(i.issuer=!0),"cardholder_name"===e[t]&&(i.cardholder_name=!0),"cardholder_identification_type"===e[t]&&(i.cardholder_identification_type=!0),"cardholder_identification_number"===e[t]&&(i.cardholder_identification_number=!0)}(r.additional_info_needed),function(){i.cardholder_name?document.getElementById("mp-card-holder-div").style.display="block":document.getElementById("mp-card-holder-div").style.display="none";i.issuer?(document.getElementById("container-issuers").style.display="block",document.getElementById("container-installments").classList.remove("col-md-12"),document.getElementById("container-installments").classList.add("col-md-8"),Mercadopago.getIssuers(r.id,u(),d)):(f(),a());i.cardholder_identification_type?(document.getElementById("mp-doc-div-title").style.display="block",document.getElementById("mp-doc-div").style.display="block",document.getElementById("mp-doc-type-div").style.display="block",Mercadopago.getIdentificationTypes()):document.getElementById("mp-doc-type-div").style.display="none";i.cardholder_identification_number?(document.getElementById("mp-doc-div-title").style.display="block",document.getElementById("mp-doc-div").style.display="block",document.getElementById("mp-doc-number-div").style.display="block"):document.getElementById("mp-doc-number-div").style.display="none";i.cardholder_identification_type||i.cardholder_identification_number||(document.getElementById("mp-doc-div-title").style.display="none",document.getElementById("mp-doc-div").style.display="none")}()):document.getElementById("id-card-number").innerHTML=""}function d(e,t){if(200===e){var n=document.getElementById("id-issuers-options"),o=document.createDocumentFragment();n.options.length=0;var d=new Option(c.select_choose,"-1");o.appendChild(d);for(var r=0;r<t.length;r++){var i="default"===t[r].name?"Otro":t[r].name;o.appendChild(new Option(i,t[r].id))}n.appendChild(o),n.removeAttribute("disabled"),$("body").on("change","#id-issuers-options",a)}else f()}function a(){for(var e={},t=document.getElementById("amount").value,n=!1,o=0;o<r.additional_info_needed.length;o++)"issuer_id"===r.additional_info_needed[o]&&(n=!0);if(n){var d=document.getElementById("id-issuers-options").value,e={bin:u(),amount:t,issuer_id:d};if("-1"===d)return}else e={bin:u(),amount:t};Mercadopago.getInstallments(e,m)}function m(e,t){if(y(),200===e){var n=new Option(c.select_choose,"",!0,!0);$("#id-installments").append(n);for(var o=[],d=0;d<t.length;d++)"aggregator"===t[d].processing_mode&&(o=t[d].payer_costs);for(var r=0;r<o.length;r++)(n=new Option(o[r].recommended_message||o[r].installments,o[r].installments)).setAttribute("data-tax",function(e){var t="";if("MLA"!==l.site_id)return t;for(var n=0;n<e.length;n++)-1!==e[n].indexOf("CFT_")&&(t=e[n]);return t}(o[r].labels)),$("#id-installments").append(n);"MLA"===l.site_id&&(p(),$("body").on("change","#id-installments",s))}else y(),p()}function s(){var e,t,n,o,d=document.querySelector("#id-installments");0<d.options.length?(o=n="",null!==(e=d.options[d.selectedIndex].getAttribute("data-tax"))&&(n=(t=e.split("|"))[0].replace("_"," "),o=t[1].replace("_"," "),"CFT 0,00%"===n&&"TEA 0,00%"===o&&(o=n="")),document.querySelector(".mp-text-cft").innerHTML=n,document.querySelector(".mp-text-tea").innerHTML=o):"SPAN"===document.querySelector("#uniform-id-installments").children[0].tagName&&(document.querySelector("#uniform-id-installments").children[0].innerHTML="")}function u(){return $("#id-card-number").val().replace(/ /g,"").replace(/-/g,"").replace(/\./g,"").substr(0,6)}function y(){document.getElementById("id-installments").innerHTML=""}function p(){document.querySelector(".mp-text-cft").innerHTML="",document.querySelector(".mp-text-tea").innerHTML=""}function f(){document.getElementById("container-issuers").style.display="none",document.getElementById("container-installments").classList.remove("col-md-8"),document.getElementById("container-installments").classList.add("mp-md-12"),document.getElementById("id-issuers-options").innerHTML=""}function o(){_();var e=function(){for(var e=!1,t=h(),n=t.querySelectorAll("[data-checkout]"),o=["cardNumber","cardExpiration","securityCode","installments"],d=0;d<n.length;d++){var r,i=n[d];-1<o.indexOf(i.getAttribute("data-checkout"))&&(-1!==i.value&&""!==i.value||(0<(r=t.querySelectorAll('small[data-main="#'+i.id+'"]')).length&&(r[0].style.display="block"),i.classList.add("mp-form-control-error"),e=!0))}return e||e}(),t=function(){var e=!1;{var t;i.issuer&&(-1!==(t=document.getElementById("id-issuers-options")).value&&""!==t.value||(t.classList.add("mp-form-control-error"),e=!0))}{var n;i.cardholder_name&&(-1!==(n=document.getElementById("id-card-holder-name")).value&&""!==n.value||(n.classList.add("mp-form-control-error"),e=!0))}{var o;i.cardholder_identification_type&&(-1!==(o=document.getElementById("id-docType")).value&&""!==o.value||(o.classList.add("mp-form-control-error"),e=!0))}{var d;i.cardholder_identification_number&&(-1!==(d=document.getElementById("id-doc-number")).value&&""!==d.value||(d.classList.add("mp-form-control-error"),document.getElementById("mp-error-324").style.display="inline-block",e=!0))}return e||e}();if(!e&&!t)return 1;g()}function g(){void 0!==document.querySelectorAll(".mp-form-control-error")&&document.querySelectorAll(".mp-form-control-error")[0].focus()}function v(e,t){200!==e&&201!==e?function(e){for(var t=h(),n=0;n<e.cause.length;n++){var o,d=e.cause[n],r="";void 0!==(r="208"===d.code||"209"===d.code||"325"===d.code||"326"===d.code?t.querySelector("#mp-error-208"):t.querySelector("#mp-error-"+d.code))&&(o=t.querySelector(r.getAttribute("data-main")),r.style.display="block",o.classList.add("mp-form-control-error"))}g(),b()}(t):(document.querySelector("#card_token_id").value=t.id,document.forms.mp_custom_checkout.submit())}function _(){for(var e=0;e<document.querySelectorAll("[data-checkout]").length;e++){var t=document.querySelectorAll("[data-checkout]")[e];t.classList.remove("mp-error-input"),t.classList.remove("mp-form-control-error")}for(var n=0;n<document.querySelectorAll(".mp-erro-form").length;n++){document.querySelectorAll(".mp-erro-form")[n].style.display="none"}}function h(){return document.querySelector("#mp_custom_checkout")}function b(){var e=document.getElementById("conditions_to_approve[terms-and-conditions]");return"object"==typeof e&&null!==e&&(e.checked=!1)}window.initializeCustom=function(e){l.site_id=e.site_id,c.select_choose=e.select_choose,t=e.psVersion},jQuery(function(){$('input[data-checkout="cardNumber"]').on("focusout",e),void 0!==document.forms.mp_custom_checkout&&(document.forms.mp_custom_checkout.onsubmit=function(){return o()?("six"===(e=t)?document.getElementById("mp-custom-finish-order").setAttribute("disabled","disabled"):"seven"===e&&document.getElementById("payment-confirmation").childNodes[1].childNodes[1].setAttribute("disabled","disabled"),function(){_();var e=h();return Mercadopago.createToken(e,v),!1}()):(b(),!1);var e}),$("#uniform-id-docType").removeClass("selector"),$("#uniform-id-installments").removeClass("selector")})}();